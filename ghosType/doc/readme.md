# GHOSTYPE

## 📌 프로젝트 개요

**GHOSTYPE**은 보안망(망분리) 환경에서도 AI가 생성한 코드나 명령어를 자동으로 입력할 수 있게 해주는  
**AI 기반 BLE-HID 자동입력 시스템**입니다.

Flutter 앱을 통해 사용자는 **텍스트를 직접 입력하거나**,  
**AI에게 요청하거나**,  
**에러 화면을 사진으로 촬영해 분석 요청**할 수 있으며,  
그 결과를 BLE로 전송하여, **ESP32 칩을 통해 보안망 PC에 자동으로 타이핑**할 수 있습니다.

> 단순 입력 앱이 아닌,  
> **“AI + OCR + 자동입력”이라는 생산성 기능의 결합체**입니다.

---

## 🧭 전체 흐름 요약

```
사용자 (앱)
  └─ 텍스트 입력 or AI 질의 or 사진 업로드
       ↓
앱 팝업: [AI 요청] / [전송]
       ↓
서버
  ├─ AI 요청 → GPT 응답 생성
  ├─ 전송 요청 → 전처리 후 BLE 시퀀스 생성
       ↓
앱: BLE로 ESP32에 전송
       ↓
ESP32-S3 (BLE HID)
       ↓
보안망 PC에 자동 타이핑
```

---

## 💡 주요 기능

### 🧠 1. AI 채팅 기반 텍스트 생성
- 사용자가 GPT 스타일 채팅창에서 프롬프트 입력
- 응답은 말풍선으로 출력
- 말풍선 옆에 **[저장]**, **[즉시 전송]** 버튼 제공

### 📸 2. 이미지 기반 오류 분석
- 사용자가 **모니터를 직접 촬영**하여 에러를 보내면,
- 서버에서 OCR(Google Vision API)을 통해 텍스트 추출
- AI에게 분석 요청 → 오류 원인 설명 + 수정된 코드 제공

### 🧾 3. 직접 텍스트 입력 및 전송
- 사용자가 직접 커맨드나 스크립트를 작성
- BLE 칩에 전송하면, 보안망 PC에 **HID 키보드 방식으로 자동 타이핑**

### 📤 4. 멀티 콘텐츠 전송
- 과거 저장된 히스토리에서 여러 항목 선택 전송 가능
- 앱은 사용자에게 다음과 같이 선택을 유도함:

> “여러 항목을 하나의 파일에 입력할까요?  
> 아니면 먼저 분리 스크립트를 보내고,  
> 거기서 각 항목을 나누어 파일로 저장하도록 할까요?”

---

## 🧑‍💻 사용자 인터페이스 흐름

1. 사용자 입력창은 하나 (CLAUDE와 같은 채팅창)
2. 하단 **전송 버튼**을 누르면 팝업 등장:

```
💬 이 내용을...

[ AI 요청 ]     [ 전송 ]
```

3. 사용자가 원하는 동작 선택:
   - [AI 요청]: 서버에 요청 → GPT 응답 → 말풍선 출력
   - [BLE 전송]: BLE 연결 확인 → 카운트다운 팝업 → 전송

4. 연결되지 않은 경우:
   - BLE 장치 목록을 보여주고 연결 유도
   - 연결 후 안내 팝업 + 타이머 → 타이핑 시작

---

## 📦 시스템 구성 요소

| 구성 요소 | 설명 |
|-----------|------|
| **Flutter 앱** | 사용자 입력, AI 요청, BLE 전송, 이미지 업로드 |
| **백엔드 서버** | AI API 연동, BLE 전송 전처리, OCR 처리, 히스토리 저장 |
| **ESP32-S3 칩** | BLE 수신 → USB HID 키보드 입력 |
| **보안망 PC** | 인터넷 불가, 외부 입력 차단 → HID만 허용 |
| **OpenAI API** | AI 질의/응답 |
| **Google Vision API** | 이미지 → 텍스트 추출 (OCR)

---

## 🛠 기술 스택 (선택 가능 구조)

| 계층 | 선택 예시 |
|------|-----------|
| 프론트 | Flutter (Android/iOS 대응) |
| 서버 | Spring Boot / Node.js (분리형 API 서버) |
| BLE 칩 | ESP32-S3 HID 키보드 모드 |
| AI | OpenAI GPT API |
| OCR | Google Vision OCR API |

---

## 📂 프로젝트 구조 예시

```
ghostype/
├── frontend/        # Flutter 앱
├── backend/         # API 서버
├── esp32/           # BLE + HID 칩 펌웨어
├── docs/            # 문서 및 설계
└── README.md
```

---

## 🧠 핵심 설계 철학

- **입력채팅창은 단 하나**, 하지만 행동은 선택적으로 분기
- 채팅창 기능 중 전송내역을 입력하면 지금까지의 전송내역이 제목별로 보이며 (제목은 최초 전송 시 AI로 생성) 재전송 긴으 제공
- AI의 역할은 단순 응답이 아니라 **실행 가능한 코드 제공**
- BLE 전송은 “정확하고 반복가능한 자동 타이핑”을 목표
- 사용자의 개입은 최소화하고, 안내는 명확하게

---

## 📈 향후 고도화 방향

- 입력 자동 분류 기능 (AI 질의 vs 전송 명령 구분)
- 히스토리 기반 명령 자동 재사용 및 템플릿화
- Web 기반 에디터 확장 (BLE 없이도 로컬 HTML로 분리 전송)
- ESP32의 Wi-Fi 기반 연동 추가 (선택적)

---

## 🔒 보안망 대응 전략

- 앱은 BLE만 사용하므로 네트워크 연결 불필요
- 보안망 PC는 **USB HID만 허용** → 파일 전송 없이 타이핑 가능
- 서버 API Key는 클라이언트에 노출되지 않음
- 입력 커서 위치는 사용자가 수동 조정 (예: 메모장, 크롬 등)

---

## 📃 라이선스
MIT License